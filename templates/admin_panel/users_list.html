{% extends "admin_panel/base.html" %}
{% block title %}Users{% endblock %}
{% block content %}
<h2>Users & Admins</h2>
<a class="btn btn-success mb-3" href="{% url 'admin_panel:user-create' %}">Create User/Admin</a>
<table class="table">
  <thead><tr><th>Username</th><th>Email</th><th>Role</th><th>Assigned Admin</th><th>Actions</th></tr></thead>
  <tbody>
  {% for u in users %}
    <tr>
      <td>{{ u.username }}</td>
      <td>{{ u.email }}</td>
      <td>{{ u.get_role_display }}</td>
      <td>{% if u.assigned_admin %}{{ u.assigned_admin.username }}{% endif %}</td>
      <td>
        <a class="btn btn-sm btn-primary" href="{% url 'admin_panel:user-edit' u.pk %}">Edit</a>
        <a class="btn btn-sm btn-danger" href="{% url 'admin_panel:user-delete' u.pk %}">Delete</a>
      </td>
    </tr>
  {% empty %}<tr><td colspan="5">No users</td></tr>{% endfor %}
  </tbody>
</table>
{% endblock %}
